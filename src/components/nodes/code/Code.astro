---
import Highlighter from './Highlighter.astro'
import Plantuml from './Plantuml.astro'
import Kroki from './Kroki.astro'
import Mermaid from './Mermaid.astro'

export interface Props {
    node: object;
}

const { node } = Astro.props as Props;

const code = node.value
const language = node.lang
const params = node.meta?node.meta.split(' '):[]

const custom_languages = ["plantuml","mermaid","blockdiag"]
const other_language = !custom_languages.includes(language)
console.log(language)
---
{(language == "plantuml")&&
    <Plantuml code={code} params={params} />
}
{(language == "blockdiag")&&
    <Kroki language={language} code={code} params={params} />
}
{(language == "mermaid")&&
    <Kroki language="mermaid" code={code} params={params} />
}
{other_language&&
    <Highlighter code={code} language={language} params={params} />
}
