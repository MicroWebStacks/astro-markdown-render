---
import {md_tree, extract_tables, extract_paragraphs_text} from './extract'
import {promises as fs} from 'fs';
import {mkdirSync,existsSync} from 'fs'
import Render from './Render.astro';

export interface Props {
	content: string;
}

const { content } = Astro.props;

if(!existsSync("./debug")){
    mkdirSync("./debug")
  }

const tree = md_tree(content)
await fs.writeFile("./debug/tree.json",JSON.stringify(tree,null,4))

const tables = extract_tables(tree)
await fs.writeFile("./debug/tables.json",JSON.stringify(tables,null,4))

const paragraphs = extract_paragraphs_text(tree)
await fs.writeFile("./debug/paragraphs.json",JSON.stringify(paragraphs,null,4))
---
<Render node={tree} />
